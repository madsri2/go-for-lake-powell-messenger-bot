<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css">
<script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
<script src="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
<style type="text/css">
  /* TODO: Get this working. Currently, the style attribute in the html below is what causes the CSS to work. */
  /* Basic settings */
  .ui-li-static.ui-collapsible {
      padding: 0;
  }
  .ui-li-static.ui-collapsible > .ui-collapsible-content > .ui-listview,
  .ui-li-static.ui-collapsible > .ui-collapsible-heading {
      margin: 0;
  }
  .ui-li-static.ui-collapsible > .ui-collapsible-content {
      padding-top: 0;
      padding-bottom: 0;
      padding-right: 0;
      border-bottom-width: 0;
  }
  /* collapse vertical borders */
  .ui-li-static.ui-collapsible > .ui-collapsible-content > .ui-listview > li.ui-last-child,
  .ui-li-static.ui-collapsible.ui-collapsible-collapsed > .ui-collapsible-heading > a.ui-btn {
      border-bottom-width: 0;
  }
  .ui-li-static.ui-collapsible > .ui-collapsible-content > .ui-listview > li.ui-first-child,
  .ui-li-static.ui-collapsible > .ui-collapsible-content > .ui-listview > li.ui-first-child > a.ui-btn,
  .ui-li-static.ui-collapsible > .ui-collapsible-heading > a.ui-btn {
      border-top-width: 0;
  }
  /* Remove right borders */
  .ui-li-static.ui-collapsible > .ui-collapsible-heading > a.ui-btn,
  .ui-li-static.ui-collapsible > .ui-collapsible-content > .ui-listview > .ui-li-static,
  .ui-li-static.ui-collapsible > .ui-collapsible-content > .ui-listview > li > a.ui-btn,
  .ui-li-static.ui-collapsible > .ui-collapsible-content {
      border-right-width: 0;
  }
  /* Remove left borders */
  /* Here, we need class ui-listview-outer to identify the outermost listview */
  .ui-listview-outer > .ui-li-static.ui-collapsible .ui-li-static.ui-collapsible.ui-collapsible,
  .ui-listview-outer > .ui-li-static.ui-collapsible > .ui-collapsible-heading > a.ui-btn,
  .ui-li-static.ui-collapsible > .ui-collapsible-content {
      border-left-width: 0;
  }
</style>
<script>

function show (dateVal){
  itinId = `#itin-${dateVal}`;
  listId = `#list-${dateVal}`;
  hiddenFormId = `#hidden-form-${dateVal}`;
  $.ajax({        
    type: "POST",
    url: "save-itin-update",
    data: {value : $(itinId).val(), 'date': dateVal},
    success: function(data) {
      console.log(`server returned ${data}`);
      $(listId).append("<li>" + $(itinId).val() + "</li>");
      $(hiddenFormId).addClass("ui-screen-hidden");
      $(listId).listview("refresh");
    },
    statusCode: {
      503: function() {
        alert("failed to save!");
        $(hiddenFormId).addClass("ui-screen-hidden");
        $(listId).listview("refresh");
      }
    }
  }); 
}

(function($,undefined) {
  $(document).bind( "pagecreate", function( e ) {
    
    $("#update-10-11", e.target ).on( "click", function( e ) { 
      $("#hidden-form-10-11").removeClass("ui-screen-hidden"); 
      $("#list-10-11").listview("refresh"); 
    }); 
    $("#itin-submit-10-11", e.target).on("submit", function(e) { 
      e.preventDefault(); //cancel the submission 
      show("10-11"); //send the request to server to save it 
    }); 
  
    $("#update-10-12", e.target ).on( "click", function( e ) { 
      $("#hidden-form-10-12").removeClass("ui-screen-hidden"); 
      $("#list-10-12").listview("refresh"); 
    }); 
    $("#itin-submit-10-12", e.target).on("submit", function(e) { 
      e.preventDefault(); //cancel the submission 
      show("10-12"); //send the request to server to save it 
    }); 
  
    $("#update-10-13", e.target ).on( "click", function( e ) { 
      $("#hidden-form-10-13").removeClass("ui-screen-hidden"); 
      $("#list-10-13").listview("refresh"); 
    }); 
    $("#itin-submit-10-13", e.target).on("submit", function(e) { 
      e.preventDefault(); //cancel the submission 
      show("10-13"); //send the request to server to save it 
    }); 
  
    $("#update-10-14", e.target ).on( "click", function( e ) { 
      $("#hidden-form-10-14").removeClass("ui-screen-hidden"); 
      $("#list-10-14").listview("refresh"); 
    }); 
    $("#itin-submit-10-14", e.target).on("submit", function(e) { 
      e.preventDefault(); //cancel the submission 
      show("10-14"); //send the request to server to save it 
    }); 
  
    $("#update-10-15", e.target ).on( "click", function( e ) { 
      $("#hidden-form-10-15").removeClass("ui-screen-hidden"); 
      $("#list-10-15").listview("refresh"); 
    }); 
    $("#itin-submit-10-15", e.target).on("submit", function(e) { 
      e.preventDefault(); //cancel the submission 
      show("10-15"); //send the request to server to save it 
    }); 
  
    $("#update-10-16", e.target ).on( "click", function( e ) { 
      $("#hidden-form-10-16").removeClass("ui-screen-hidden"); 
      $("#list-10-16").listview("refresh"); 
    }); 
    $("#itin-submit-10-16", e.target).on("submit", function(e) { 
      e.preventDefault(); //cancel the submission 
      show("10-16"); //send the request to server to save it 
    }); 
  
    $("#update-10-17", e.target ).on( "click", function( e ) { 
      $("#hidden-form-10-17").removeClass("ui-screen-hidden"); 
      $("#list-10-17").listview("refresh"); 
    }); 
    $("#itin-submit-10-17", e.target).on("submit", function(e) { 
      e.preventDefault(); //cancel the submission 
      show("10-17"); //send the request to server to save it 
    }); 
  
    $("#update-10-18", e.target ).on( "click", function( e ) { 
      $("#hidden-form-10-18").removeClass("ui-screen-hidden"); 
      $("#list-10-18").listview("refresh"); 
    }); 
    $("#itin-submit-10-18", e.target).on("submit", function(e) { 
      e.preventDefault(); //cancel the submission 
      show("10-18"); //send the request to server to save it 
    }); 
  
    $("#update-10-19", e.target ).on( "click", function( e ) { 
      $("#hidden-form-10-19").removeClass("ui-screen-hidden"); 
      $("#list-10-19").listview("refresh"); 
    }); 
    $("#itin-submit-10-19", e.target).on("submit", function(e) { 
      e.preventDefault(); //cancel the submission 
      show("10-19"); //send the request to server to save it 
    }); 
  
    $("#update-10-20", e.target ).on( "click", function( e ) { 
      $("#hidden-form-10-20").removeClass("ui-screen-hidden"); 
      $("#list-10-20").listview("refresh"); 
    }); 
    $("#itin-submit-10-20", e.target).on("submit", function(e) { 
      e.preventDefault(); //cancel the submission 
      show("10-20"); //send the request to server to save it 
    }); 
  
  });
})(jQuery);
</script>
</head>
<body>
<div data-role="main" class="ui-content">
 <ul data-role="listview" class="ui-listview-outer ui-mini">
    <li data-role="collapsible" data-inset="false" data-collapsed-icon="carat-r" data-expanded-icon="carat-d" style="margin: 0; padding: 0; border-top-width: 0; border-bottom-width: 0;">
    <h2>November 11, Wednesday</h2>
    <ul id="outer-list" data-role="listview" data-shadow="false" data-inset="true" data-corners="false" style="margin: 0; padding: 0;">
      <li style="padding: 0;">
        <ul id="list-10-11" data-role="listview" data-shadow="false" data-inset="true" data-corners="false" style="margin: 0;">
          <li>Details for city Seattle</li><li>Average min temp: 37&degF. Max temp: 47}&degF</li><li>Chance of rain is 51%</li><li>It will be mostly cloudy today.</li><li>Leaving Seattle at 09:00.</li>
        </ul>
      </li>
      <li class="ui-screen-hidden" id="hidden-form-10-11" style="margin: 0; padding: 0; border-top-width: 0; border-bottom-width: 0; padding-top: 0; padding-bottom: 0;">
        <form id="itin-submit-10-11" method="post">
          <input type="text" name="itin" id="itin-10-11" value="">
          <button type="submit" name="i-submit">submit</button>
        </form>
      </li>
      <li><button id="update-10-11" data-inline="true" data-shadow="true">Edit Itinerary</button></li>
    </ul>
  </li>

  <li data-role="collapsible" data-inset="false" data-collapsed-icon="carat-r" data-expanded-icon="carat-d" style="margin: 0; padding: 0; border-top-width: 0; border-bottom-width: 0;">
    <h2>November 12, Thursday</h2>
    <ul id="outer-list" data-role="listview" data-shadow="false" data-inset="true" data-corners="false" style="margin: 0; padding: 0;">
      <li style="padding: 0;">
        <ul id="list-10-12" data-role="listview" data-shadow="false" data-inset="true" data-corners="false" style="margin: 0;">
          <li>Details for city Chennai</li><li>Average min temp: 72&degF. Max temp: 87}&degF</li><li>Chance of rain is 37</li><li>It will be mostly sunny today.</li>
        </ul>
      </li>
      <li class="ui-screen-hidden" id="hidden-form-10-12" style="margin: 0; padding: 0; border-top-width: 0; border-bottom-width: 0; padding-top: 0; padding-bottom: 0;">
        <form id="itin-submit-10-12" method="post">
          <input type="text" name="itin" id="itin-10-12" value="">
          <button type="submit" name="i-submit">submit</button>
        </form>
      </li>
      <li><button id="update-10-12" data-inline="true" data-shadow="true">Edit Itinerary</button></li>
    </ul>
  </li>

  <li data-role="collapsible" data-inset="false" data-collapsed-icon="carat-r" data-expanded-icon="carat-d" style="margin: 0; padding: 0; border-top-width: 0; border-bottom-width: 0;">
    <h2>November 13, Friday</h2>
    <ul id="outer-list" data-role="listview" data-shadow="false" data-inset="true" data-corners="false" style="margin: 0; padding: 0;">
      <li style="padding: 0;">
        <ul id="list-10-13" data-role="listview" data-shadow="false" data-inset="true" data-corners="false" style="margin: 0;">
          <li>Details for city Chennai</li><li>Average min temp: 72&degF. Max temp: 87}&degF</li><li>Chance of rain is 37</li><li>It will be mostly sunny today.</li>
        </ul>
      </li>
      <li class="ui-screen-hidden" id="hidden-form-10-13" style="margin: 0; padding: 0; border-top-width: 0; border-bottom-width: 0; padding-top: 0; padding-bottom: 0;">
        <form id="itin-submit-10-13" method="post">
          <input type="text" name="itin" id="itin-10-13" value="">
          <button type="submit" name="i-submit">submit</button>
        </form>
      </li>
      <li><button id="update-10-13" data-inline="true" data-shadow="true">Edit Itinerary</button></li>
    </ul>
  </li>

  <li data-role="collapsible" data-inset="false" data-collapsed-icon="carat-r" data-expanded-icon="carat-d" style="margin: 0; padding: 0; border-top-width: 0; border-bottom-width: 0;">
    <h2>November 14, Saturday</h2>
    <ul id="outer-list" data-role="listview" data-shadow="false" data-inset="true" data-corners="false" style="margin: 0; padding: 0;">
      <li style="padding: 0;">
        <ul id="list-10-14" data-role="listview" data-shadow="false" data-inset="true" data-corners="false" style="margin: 0;">
          <li>Details for city Mumbai</li><li>Average min temp: 69&degF. Max temp: 94}&degF</li><li>Chance of rain is 3</li><li>It will be mostly sunny today.</li>
        </ul>
      </li>
      <li class="ui-screen-hidden" id="hidden-form-10-14" style="margin: 0; padding: 0; border-top-width: 0; border-bottom-width: 0; padding-top: 0; padding-bottom: 0;">
        <form id="itin-submit-10-14" method="post">
          <input type="text" name="itin" id="itin-10-14" value="">
          <button type="submit" name="i-submit">submit</button>
        </form>
      </li>
      <li><button id="update-10-14" data-inline="true" data-shadow="true">Edit Itinerary</button></li>
    </ul>
  </li>

  <li data-role="collapsible" data-inset="false" data-collapsed-icon="carat-r" data-expanded-icon="carat-d" style="margin: 0; padding: 0; border-top-width: 0; border-bottom-width: 0;">
    <h2>November 15, Sunday</h2>
    <ul id="outer-list" data-role="listview" data-shadow="false" data-inset="true" data-corners="false" style="margin: 0; padding: 0;">
      <li style="padding: 0;">
        <ul id="list-10-15" data-role="listview" data-shadow="false" data-inset="true" data-corners="false" style="margin: 0;">
          <li>Details for city Mumbai</li><li>Average min temp: 69&degF. Max temp: 94}&degF</li><li>Chance of rain is 3</li><li>It will be mostly sunny today.</li>
        </ul>
      </li>
      <li class="ui-screen-hidden" id="hidden-form-10-15" style="margin: 0; padding: 0; border-top-width: 0; border-bottom-width: 0; padding-top: 0; padding-bottom: 0;">
        <form id="itin-submit-10-15" method="post">
          <input type="text" name="itin" id="itin-10-15" value="">
          <button type="submit" name="i-submit">submit</button>
        </form>
      </li>
      <li><button id="update-10-15" data-inline="true" data-shadow="true">Edit Itinerary</button></li>
    </ul>
  </li>

  <li data-role="collapsible" data-inset="false" data-collapsed-icon="carat-r" data-expanded-icon="carat-d" style="margin: 0; padding: 0; border-top-width: 0; border-bottom-width: 0;">
    <h2>November 16, Monday</h2>
    <ul id="outer-list" data-role="listview" data-shadow="false" data-inset="true" data-corners="false" style="margin: 0; padding: 0;">
      <li style="padding: 0;">
        <ul id="list-10-16" data-role="listview" data-shadow="false" data-inset="true" data-corners="false" style="margin: 0;">
          <li>Details for city Mumbai</li><li>Average min temp: 69&degF. Max temp: 94}&degF</li><li>Chance of rain is 3</li><li>It will be mostly sunny today.</li>
        </ul>
      </li>
      <li class="ui-screen-hidden" id="hidden-form-10-16" style="margin: 0; padding: 0; border-top-width: 0; border-bottom-width: 0; padding-top: 0; padding-bottom: 0;">
        <form id="itin-submit-10-16" method="post">
          <input type="text" name="itin" id="itin-10-16" value="">
          <button type="submit" name="i-submit">submit</button>
        </form>
      </li>
      <li><button id="update-10-16" data-inline="true" data-shadow="true">Edit Itinerary</button></li>
    </ul>
  </li>

  <li data-role="collapsible" data-inset="false" data-collapsed-icon="carat-r" data-expanded-icon="carat-d" style="margin: 0; padding: 0; border-top-width: 0; border-bottom-width: 0;">
    <h2>November 17, Tuesday</h2>
    <ul id="outer-list" data-role="listview" data-shadow="false" data-inset="true" data-corners="false" style="margin: 0; padding: 0;">
      <li style="padding: 0;">
        <ul id="list-10-17" data-role="listview" data-shadow="false" data-inset="true" data-corners="false" style="margin: 0;">
          <li>Details for city Goa</li><li>Average min temp: 61&degF. Max temp: 75}&degF</li><li>Chance of rain is 4</li><li>It will be sunny today.</li>
        </ul>
      </li>
      <li class="ui-screen-hidden" id="hidden-form-10-17" style="margin: 0; padding: 0; border-top-width: 0; border-bottom-width: 0; padding-top: 0; padding-bottom: 0;">
        <form id="itin-submit-10-17" method="post">
          <input type="text" name="itin" id="itin-10-17" value="">
          <button type="submit" name="i-submit">submit</button>
        </form>
      </li>
      <li><button id="update-10-17" data-inline="true" data-shadow="true">Edit Itinerary</button></li>
    </ul>
  </li>

  <li data-role="collapsible" data-inset="false" data-collapsed-icon="carat-r" data-expanded-icon="carat-d" style="margin: 0; padding: 0; border-top-width: 0; border-bottom-width: 0;">
    <h2>November 18, Wednesday</h2>
    <ul id="outer-list" data-role="listview" data-shadow="false" data-inset="true" data-corners="false" style="margin: 0; padding: 0;">
      <li style="padding: 0;">
        <ul id="list-10-18" data-role="listview" data-shadow="false" data-inset="true" data-corners="false" style="margin: 0;">
          <li>Details for city Goa</li><li>Average min temp: 61&degF. Max temp: 75}&degF</li><li>Chance of rain is 4</li><li>It will be sunny today.</li>
        </ul>
      </li>
      <li class="ui-screen-hidden" id="hidden-form-10-18" style="margin: 0; padding: 0; border-top-width: 0; border-bottom-width: 0; padding-top: 0; padding-bottom: 0;">
        <form id="itin-submit-10-18" method="post">
          <input type="text" name="itin" id="itin-10-18" value="">
          <button type="submit" name="i-submit">submit</button>
        </form>
      </li>
      <li><button id="update-10-18" data-inline="true" data-shadow="true">Edit Itinerary</button></li>
    </ul>
  </li>

  <li data-role="collapsible" data-inset="false" data-collapsed-icon="carat-r" data-expanded-icon="carat-d" style="margin: 0; padding: 0; border-top-width: 0; border-bottom-width: 0;">
    <h2>November 19, Thursday</h2>
    <ul id="outer-list" data-role="listview" data-shadow="false" data-inset="true" data-corners="false" style="margin: 0; padding: 0;">
      <li style="padding: 0;">
        <ul id="list-10-19" data-role="listview" data-shadow="false" data-inset="true" data-corners="false" style="margin: 0;">
          <li>Details for city Chennai</li><li>Average min temp: 72&degF. Max temp: 87}&degF</li><li>Chance of rain is 37</li><li>It will be mostly sunny today.</li>
        </ul>
      </li>
      <li class="ui-screen-hidden" id="hidden-form-10-19" style="margin: 0; padding: 0; border-top-width: 0; border-bottom-width: 0; padding-top: 0; padding-bottom: 0;">
        <form id="itin-submit-10-19" method="post">
          <input type="text" name="itin" id="itin-10-19" value="">
          <button type="submit" name="i-submit">submit</button>
        </form>
      </li>
      <li><button id="update-10-19" data-inline="true" data-shadow="true">Edit Itinerary</button></li>
    </ul>
  </li>

  <li data-role="collapsible" data-inset="false" data-collapsed-icon="carat-r" data-expanded-icon="carat-d" style="margin: 0; padding: 0; border-top-width: 0; border-bottom-width: 0;">
    <h2>November 20, Friday</h2>
    <ul id="outer-list" data-role="listview" data-shadow="false" data-inset="true" data-corners="false" style="margin: 0; padding: 0;">
      <li style="padding: 0;">
        <ul id="list-10-20" data-role="listview" data-shadow="false" data-inset="true" data-corners="false" style="margin: 0;">
          <li>Details for city Chennai</li><li>Average min temp: 72&degF. Max temp: 87}&degF</li><li>Chance of rain is 37</li><li>It will be mostly sunny today.</li>
        </ul>
      </li>
      <li class="ui-screen-hidden" id="hidden-form-10-20" style="margin: 0; padding: 0; border-top-width: 0; border-bottom-width: 0; padding-top: 0; padding-bottom: 0;">
        <form id="itin-submit-10-20" method="post">
          <input type="text" name="itin" id="itin-10-20" value="">
          <button type="submit" name="i-submit">submit</button>
        </form>
      </li>
      <li><button id="update-10-20" data-inline="true" data-shadow="true">Edit Itinerary</button></li>
    </ul>
  </li>


 </ul> 
</div>
</body>
